
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://phonepe.github.io/bonsai/usage/building-trees.html">
      
      
        <link rel="prev" href="creating-bonsai.html">
      
      
        <link rel="next" href="evaluating-trees.html">
      
      
        
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>Building Trees - Bonsai</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
        <script src="../assets/external/unpkg.com/iframe-worker/shim.js"></script>
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#building-trees" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Bonsai" class="md-header__button md-logo" aria-label="Bonsai" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Bonsai
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Building Trees
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/PhonePe/bonsai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../index.html" class="md-tabs__link">
        
  
  
    
  
  Bonsai

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../overview.html" class="md-tabs__link">
        
  
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../getting-started/quick-installation.html" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../core-concepts/index.html" class="md-tabs__link">
          
  
  
  Core Concepts

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="index.html" class="md-tabs__link">
          
  
  
  Usage

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../storage.html" class="md-tabs__link">
        
  
  
    
  
  Storage

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../advanced-usage/index.html" class="md-tabs__link">
          
  
  
  Advanced Usage

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../performance/index.html" class="md-tabs__link">
          
  
  
  Performance

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../use-cases/index.html" class="md-tabs__link">
          
  
  
  Use Cases

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../troubleshooting/index.html" class="md-tabs__link">
          
  
  
  Troubleshooting

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Bonsai" class="md-nav__button md-logo" aria-label="Bonsai" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    Bonsai
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/PhonePe/bonsai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bonsai
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/quick-installation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/getting-started.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How to Read
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Core Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-concepts/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-concepts/knot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Knot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-concepts/edge.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Edge
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-concepts/knotdata.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Knot Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-concepts/context.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Context
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Usage
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="installation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="creating-bonsai.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating Bonsai Instance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Building Trees
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="building-trees.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Building Trees
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-tree-building" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Tree Building
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-different-types-of-knots" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Different Types of Knots
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating Different Types of Knots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#value-knots" class="md-nav__link">
    <span class="md-ellipsis">
      
        Value Knots
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-knots" class="md-nav__link">
    <span class="md-ellipsis">
      
        List Knots
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map-knots" class="md-nav__link">
    <span class="md-ellipsis">
      
        Map Knots
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-edges-with-different-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Edges with Different Conditions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-complex-nested-structures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building Complex Nested Structures
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-complete-trees" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Complete Trees
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="evaluating-trees.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluating Trees
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="knot-operations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Knot Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="edge-operations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Edge Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tree-operations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trees Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="delta-operations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Delta Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Storage
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Advanced Usage
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Advanced Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-usage/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced Usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-usage/nested-tree-structures.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nested Tree Structures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-usage/custom-context.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Context
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-usage/tree-validation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tree Validation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-usage/versioning.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Versioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-usage/contextual-preferences.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contextual Preferences
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Performance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Performance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/memory-compute.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Compute
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/optimizing-tree-structure.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optimizing Tree Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Use Cases
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Use Cases
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use-cases/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Use Cases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use-cases/feature-flagging.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feature Flagging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use-cases/dynamic-pricing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dynamic Pricing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Troubleshooting
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/common-errors.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Common Errors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/debugging-tips.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging Tips
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-tree-building" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Tree Building
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-different-types-of-knots" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Different Types of Knots
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating Different Types of Knots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#value-knots" class="md-nav__link">
    <span class="md-ellipsis">
      
        Value Knots
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-knots" class="md-nav__link">
    <span class="md-ellipsis">
      
        List Knots
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map-knots" class="md-nav__link">
    <span class="md-ellipsis">
      
        Map Knots
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-edges-with-different-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Edges with Different Conditions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-complex-nested-structures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building Complex Nested Structures
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-complete-trees" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Complete Trees
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../index.html" class="md-path__link">
        
  <span class="md-ellipsis">
    Bonsai
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="index.html" class="md-path__link">
          
  <span class="md-ellipsis">
    Usage
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="building-trees">Building Trees<a class="headerlink" href="#building-trees" title="Permanent link">&para;</a></h1>
<p>Building tree structures is a core part of using Bonsai. This section gives several examples of building 
custom trees to paint the picture of how trees are created. But in practice, in you application, you would do this
through a set of APIs exposed by your application, and potentially, a UI on the other side that is facilitating the 
construction of these tress.</p>
<h2 id="basic-tree-building">Basic Tree Building<a class="headerlink" href="#basic-tree-building" title="Permanent link">&para;</a></h2>
<p>A typical Bonsai tree consists of:</p>
<ol>
<li>Leaf Knots containing values</li>
<li>Decision Knots with conditional Edges</li>
<li>Root Knots mapped to keys</li>
</ol>
<p>Here's a simple example of building a tree for user eligibility:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Create a Bonsai instance</span>
<span class="n">Bonsai</span><span class="o">&lt;</span><span class="n">Context</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bonsai</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BonsaiBuilder</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">withBonsaiProperties</span><span class="p">(</span><span class="n">BonsaiProperties</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">build</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">withEdgeStore</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">InMemoryEdgeStore</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">withKeyTreeStore</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">InMemoryKeyTreeStore</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">withKnotStore</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">InMemoryKnotStore</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="c1">// Create leaf knots with values</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">eligibleKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">booleanValue</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;User is eligible&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="n">Knot</span><span class="w"> </span><span class="n">ineligibleKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">booleanValue</span><span class="p">(</span><span class="kc">false</span><span class="p">).</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;User is ineligible&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// Create the root knot</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">rootKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;User eligibility decision point&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// Add variations to the root knot</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">addVariation</span><span class="p">(</span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">Variation</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">knotId</span><span class="p">(</span><span class="n">eligibleKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;$.user.age&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">GREATER_THAN_EQUAL</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">(),</span>
<span class="w">        </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;$.user.country&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">IN</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;US&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;CA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;UK&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="c1">// Add a default variation (no filters) for ineligible users</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">addVariation</span><span class="p">(</span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">Variation</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">knotId</span><span class="p">(</span><span class="n">ineligibleKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="c1">// Map a key to the root knot</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">createMapping</span><span class="p">(</span><span class="s">&quot;userEligibility&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
</code></pre></div>
<h2 id="creating-different-types-of-knots">Creating Different Types of Knots<a class="headerlink" href="#creating-different-types-of-knots" title="Permanent link">&para;</a></h2>
<h3 id="value-knots">Value Knots<a class="headerlink" href="#value-knots" title="Permanent link">&para;</a></h3>
<p>Value Knots contain primitive values:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// String value</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">stringKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">stringValue</span><span class="p">(</span><span class="s">&quot;Hello, World!&quot;</span><span class="p">).</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A string knot&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// Boolean value</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">booleanKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">booleanValue</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A boolean knot&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// Number value</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">numberKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">numberValue</span><span class="p">(</span><span class="mf">42.5</span><span class="p">).</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A number knot&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// JSON value</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">jsonKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">jsonValue</span><span class="p">(</span><span class="s">&quot;{\&quot;name\&quot;:\&quot;John\&quot;,\&quot;age\&quot;:30}&quot;</span><span class="p">).</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A JSON knot&quot;</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>
<h3 id="list-knots">List Knots<a class="headerlink" href="#list-knots" title="Permanent link">&para;</a></h3>
<p>List Knots contain references to multiple other Knots:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Create a list knot</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">listKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">MultiKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">knotIds</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;knot1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;knot2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;knot3&quot;</span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A list knot&quot;</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>
<h3 id="map-knots">Map Knots<a class="headerlink" href="#map-knots" title="Permanent link">&para;</a></h3>
<p>Map Knots contain key-based references to other Knots:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Create a map knot</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">mapKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">MapKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">keyMapping</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">nameKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span>
<span class="w">            </span><span class="s">&quot;age&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ageKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span>
<span class="w">            </span><span class="s">&quot;isActive&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">activeKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">()</span>
<span class="w">        </span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A map knot&quot;</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>
<h2 id="creating-edges-with-different-conditions">Creating Edges with Different Conditions<a class="headerlink" href="#creating-edges-with-different-conditions" title="Permanent link">&para;</a></h2>
<p>Edges (or Variations) connect Knots and define conditional paths through the tree. Here are examples of different types of conditions:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Equals condition</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">addVariation</span><span class="p">(</span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">Variation</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">knotId</span><span class="p">(</span><span class="n">targetKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;$.user.type&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">EQUALS</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;premium&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="c1">// Greater than condition</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">addVariation</span><span class="p">(</span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">Variation</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">knotId</span><span class="p">(</span><span class="n">targetKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;$.user.age&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">GREATER_THAN</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="c1">// In condition (membership in a list)</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">addVariation</span><span class="p">(</span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">Variation</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">knotId</span><span class="p">(</span><span class="n">targetKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;$.user.country&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">IN</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;US&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;CA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;UK&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="c1">// Contains condition (substring match)</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">addVariation</span><span class="p">(</span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">Variation</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">knotId</span><span class="p">(</span><span class="n">targetKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;$.user.email&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">CONTAINS</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;@example.com&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="c1">// Regex condition (pattern match)</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">addVariation</span><span class="p">(</span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">Variation</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">knotId</span><span class="p">(</span><span class="n">targetKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;$.user.phone&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">REGEX</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;^\\+1-\\d{3}-\\d{3}-\\d{4}$&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="c1">// Multiple conditions (AND logic)</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">addVariation</span><span class="p">(</span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">Variation</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">knotId</span><span class="p">(</span><span class="n">targetKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;$.user.age&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">GREATER_THAN_EQUAL</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">(),</span>
<span class="w">        </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;$.user.country&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">IN</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;US&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;CA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;UK&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="c1">// Hope condition (Hope expression)</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">addVariation</span><span class="p">(</span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">Variation</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">knotId</span><span class="p">(</span><span class="n">targetKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">field</span><span class="p">(</span><span class="s">&quot;$.user.age&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">HOPE</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;\&quot;$.user.age\&quot; &gt; 18&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>

<span class="c1">// Default condition (no filters)</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">addVariation</span><span class="p">(</span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">Variation</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">knotId</span><span class="p">(</span><span class="n">defaultKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">());</span>
</code></pre></div>
<h2 id="building-complex-nested-structures">Building Complex Nested Structures<a class="headerlink" href="#building-complex-nested-structures" title="Permanent link">&para;</a></h2>
<p>Bonsai allows you to create complex nested structures using Map and List Knots:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Create leaf knots with values</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">nameKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">stringValue</span><span class="p">(</span><span class="s">&quot;John Doe&quot;</span><span class="p">).</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">()</span>
<span class="p">);</span>

<span class="n">Knot</span><span class="w"> </span><span class="n">ageKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">numberValue</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">()</span>
<span class="p">);</span>

<span class="n">Knot</span><span class="w"> </span><span class="n">activeKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">booleanValue</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">()</span>
<span class="p">);</span>

<span class="c1">// Create a user profile knot that references the leaf knots</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">userProfileKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">MapKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">keyMapping</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">nameKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span>
<span class="w">            </span><span class="s">&quot;age&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ageKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span>
<span class="w">            </span><span class="s">&quot;active&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">activeKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">()</span>
<span class="w">        </span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;User profile data&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// Create a list of user profiles</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">userListKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createKnot</span><span class="p">(</span>
<span class="w">    </span><span class="n">MultiKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">knotIds</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">userProfileKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span><span class="w"> </span><span class="n">otherUserProfileKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">()))</span>
<span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">(),</span>
<span class="w">    </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;List of user profiles&quot;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// Map a key to the user list knot</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">createMapping</span><span class="p">(</span><span class="s">&quot;users&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">userListKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
</code></pre></div>
<h2 id="creating-complete-trees">Creating Complete Trees<a class="headerlink" href="#creating-complete-trees" title="Permanent link">&para;</a></h2>
<p>You can create a complete tree structure in one operation using the <code>createCompleteTree</code> method:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Create a TreeKnot structure</span>
<span class="n">TreeKnot</span><span class="w"> </span><span class="n">treeKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TreeKnot</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;rootKnot&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">data</span><span class="p">(</span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">build</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="na">properties</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Root knot&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">edges</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">TreeEdge</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;edge1&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">                </span><span class="n">Filter</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;$.user.age&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">GREATER_THAN_EQUAL</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">            </span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">targetKnot</span><span class="p">(</span>
<span class="w">                </span><span class="n">TreeKnot</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;eligibleKnot&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">data</span><span class="p">(</span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">booleanValue</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="na">build</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">properties</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;User is eligible&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">(),</span>
<span class="w">        </span><span class="n">TreeEdge</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;edge2&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">targetKnot</span><span class="p">(</span>
<span class="w">                </span><span class="n">TreeKnot</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;ineligibleKnot&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">data</span><span class="p">(</span><span class="n">ValuedKnotData</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">booleanValue</span><span class="p">(</span><span class="kc">false</span><span class="p">).</span><span class="na">build</span><span class="p">())</span>
<span class="w">                    </span><span class="p">.</span><span class="na">properties</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;User is ineligible&quot;</span><span class="p">))</span>
<span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="c1">// Create the complete tree</span>
<span class="n">Knot</span><span class="w"> </span><span class="n">rootKnot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonsai</span><span class="p">.</span><span class="na">createCompleteTree</span><span class="p">(</span><span class="n">treeKnot</span><span class="p">);</span>

<span class="c1">// Map a key to the root knot</span>
<span class="n">bonsai</span><span class="p">.</span><span class="na">createMapping</span><span class="p">(</span><span class="s">&quot;userEligibility&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rootKnot</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
</code></pre></div>
<h2 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Plan your tree structure</strong>: Design your tree structure before implementing it</li>
<li><strong>Use meaningful IDs and descriptions</strong>: Make your tree easier to understand and maintain</li>
<li><strong>Order variations appropriately</strong>: Remember that variations are evaluated in order</li>
<li><strong>Include default variations</strong>: Always include a default variation (with no filters) as the last variation on a knot</li>
<li><strong>Keep trees shallow</strong>: Minimize the depth of your trees for better performance</li>
<li><strong>Reuse knots</strong>: Use the same knot in multiple places to avoid duplication</li>
<li><strong>Use appropriate knot types</strong>: Choose the right knot type (value, list, or map) for your data</li>
<li><strong>Validate your trees</strong>: Use the validator to ensure your trees are valid</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="creating-bonsai.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Creating Bonsai Instance">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Creating Bonsai Instance
              </div>
            </div>
          </a>
        
        
          
          <a href="evaluating-trees.html" class="md-footer__link md-footer__link--next" aria-label="Next: Evaluating Trees">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Evaluating Trees
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025  PhonePe Private Limited
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/PhonePe" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/phonepe-internet" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/phonepe" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tracking", "navigation.path", "navigation.tabs", "content.code.copy", "content.code.annotate", "navigation.expand", "toc.follow", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>